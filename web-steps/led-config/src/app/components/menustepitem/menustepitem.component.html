<script src="menustepitem.component.ts"></script>
<form>

  <div class="gridContainer">
    <div *ngIf="true" class="itemModel">
      <div class="stepCurrentCard">
        <md-card class="stepCard">
          <md-card-header>
            <md-card-title>
              <md-chip-list>
                <md-chip class="stepchip">{{step.description}}
                  <div *ngIf="step.skippable"> - optional</div>

                </md-chip>


              </md-chip-list>
            </md-card-title>
            <md-card-subtitle></md-card-subtitle>
          </md-card-header>

          <md-card-content>
            <div class="selectionPanel">
              <div *ngIf="isStepTypeValues(step) && !skippable" class="propContainer">

                <div class="selectContainer">
                  <md-select placeholder="Select {{step.configDescription}}" (onClose)="changeSelect($event)"
                             [(ngModel)]="m"
                             [ngModelOptions]="{standalone: true}"
                             floatPlaceholder="never" class="selectBoxContainer" overlayDir="bottom">
                    <md-option *ngFor="let m of filteredModels;let i=index;" [value]="m" class="selectOption">
                      <div>{{ getModelName(m) }}</div>

                    </md-option>
                  </md-select>

                </div>
                <div *ngIf="checkResetButton()" class="stepButtonReset">
                  <button md-raised-button (click)="reset()">Reset</button>
                </div>

              </div>

              <div *ngIf="isStepTypeNumber(step)">

                Click on line to select {{step.configDescription}}<br/>
                Width:
                <md-slider class="mat-slider-horizontal"
                           max="2000"
                           min="{{calculateMinValue(step)}}"
                           step="{{calculateStepValue(step)}}"
                           thumb-label="true" [(ngModel)]="step.modelValue" name="inputValue"
                           (ngModelChange)="onInputChange($event)">
                </md-slider>
                mm.

              </div>
            </div>
          </md-card-content>
        </md-card>


      </div>

      <div *ngIf="m">
        <md-card class="infoCard" *ngIf="!skippable">

          <md-card-header *ngIf="currentPart | async; let part; else loading">

            <div md-card-avatar *ngIf="getImageUrl(m,part)!=null" class="detailedImage"
                 [style.background-image]="'url(' + getImageUrl(m,part) + ')'" [style.background-size]="cover"
                 [style.width]="'220px'" [style.height]="'220px'">

            </div>

          </md-card-header>
          <ng-template #loading>
            <md-list dense class="listProperties">
              <md-list-item i18n>
                Loading part data...
              </md-list-item>
            </md-list>
          </ng-template>


          <md-card-content>
            <div *ngIf="m">
              <md-list dense class="listProperties">

                <md-list-item i18n>
                  Description: {{getModelName(m)}}

                </md-list-item>
                <md-divider></md-divider>
                <md-list-item *ngIf="m.maxDimension!=null && m.maxDimension.width!=null" i18n>
                  Max. length: {{m.maxDimension==null?'':m.maxDimension.width}} mm
                </md-list-item>
                <md-divider></md-divider>
                <md-list-item *ngIf="(currentPart | async); let part; else (loadingPrice)">
                  <div *ngIf="part.price; else contentNoPrice">
                    Price: {{((evaluatePrice(part))) | currency:'EUR':true}} ({{getDescriptionFromPart(part)}})
                  </div>
                  <ng-template #contentNoPrice>
                    No price information available.
                  </ng-template>
                </md-list-item>
                <ng-template #loadingPrice> Loading price information...</ng-template>

                <md-list-item i18n *ngIf="m.productPage">
                  <a href="{{m.productPage}}" target="_blank" md-raised-button md-raised md-warn
                     class="customMoreButton" [style.line-height]="'22px'" target="_blank">more information</a>

                </md-list-item>
              </md-list>
            </div>
          </md-card-content>
        </md-card>

      </div>

    </div>

  </div>
</form>
